---
title: 'ุญุฒูุฉ tasi 2.0 ๐ฆ '
author: 'Hussain'
date: '2021-11-29'
slug: "tasi-2-0"
categories: []
tags:
  - ุญุฒู-r
---

<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>
<script src="/rmarkdown-libs/kePrint/kePrint.js"></script>
<link href="/rmarkdown-libs/lightable/lightable.css" rel="stylesheet" />


<p><img src="/images/logo.png"  width="35%" style="display: block;
  margin-left: auto;
  margin-right: auto;"></p>
<p>tasi ูู ุญุฒูุฉ ููุช ุจุชุทููุฑูุง ูุฌูุจ ุจูุงูุงุช ุงูุณูู ุงูุณุนูุฏู ุงูููุดูุฑุฉ ูุนุงูุฉ ุงููุงุณ ุนูู ูููุน ุงูุณูู ุงูุณุนูุฏู. ูุฏููุง ุชุณููู ูุชุจุณูุท ุณูุฑ ุนูู ุชุญููู ุจูุงูุงุช ุงูุณูู ูุชุทููุฑ ุงููุคุดุฑุงุช ูุงูุชุญูููุงุช ุงููููุฉ. ุงูุฅุตุฏุงุฑ ุงูุฃูู ูู ูุฐู ุงูุญุฒูุฉ ูุงู ููุชุตุฑุง ุนูู ุฌูุจ ุงูุฃุณุนุงุฑ ุงูููููุฉ ูุฃุณูู ุงูุดุฑูุงุช ููุท. ููู ูุน ูุฑูุฑ ุงูููุช ูุฑุฑุช ุฃู ุงูุณุน ุฃููุงููุงุช ูุฐู ุงูุญุฒูุฉ ุฅูู ุฌูุจ ุงูููุงุฆู ุงููุงููุฉ ุงูุถุง ูุชูุณูู ุงูุจูุงูุงุช ุจุตูุบุฉ ููุนูุงุฑ ูุชูุงุณุจ ูุน ุงูุญุฒู ุงููุชุฎุตุต ูู ุชุญููู ุงูุชุณูุณูุงุช ุงูุฒูููุฉ.</p>
<div id="ูุง-ุงูุฌุฏูุฏ-ูู-ุงูุญุฒูุฉ" class="section level3">
<h3>ูุง ุงูุฌุฏูุฏ ูู ุงูุญุฒูุฉ</h3>
<ul>
<li><h4 id="ุฌูุจ-ุจูุงูุงุช-ูุคุดุฑุงุช-ุงููุทุงุนุงุช">ุฌูุจ ุจูุงูุงุช ูุคุดุฑุงุช ุงููุทุงุนุงุช</h4>
ุงูุขู ุจุฅููุงูู ุฌูุจ ููุณ ููุท ุงุณุนุงุฑ ุงูุคุดุฑ ุงูุนุงู ุจู ุญุชู ูุคุดุฑุงุช ุงููุทุงุนุงุช ุงูุชุฌุงุฑูุฉ ุงูุถุง. ุชู ุฅุถุงูุฉ ุญูุงูู ุงูุซุฑ ูู ุนุดุฑูู ุฏุงูุฉ ูุฌูุจ ุชูู ุงููุคุดุฑุงุช. ุฌููุน ุงูุฏูุงู ุชุจุฏุฃ ุจู <code>get_</code> ุซู ุฃุณู ุงููุทุงุน. ูู ูุง ุนููู ูุนูู ูู ุชุญุฏูุฏ ุงููุฏุฉ ุงูุฒูููุฉ ููุท. ุฅููู ูุฐุง ุงููุซุงู</li>
</ul>
<pre class="r"><code># Install the package if you have not 
# devtools::install_github(&quot;Hussain-Alsalman/tasi&quot;)
library(&quot;tasi&quot;)
library(&quot;magrittr&quot;)
library(&quot;ggplot2&quot;)
library(&quot;dplyr&quot;)
library(&quot;tidyquant&quot;)

# Basic Example  
get_capitals(start_date = &quot;2020-01-01&quot;, end_date = &quot;2021-11-27&quot;) %&gt;% 
  head()</code></pre>
<pre><code>##           date    high    open     low   close totalVolume  totalTurnover
## 476 2020-01-01 4423.98 4332.37 4371.88 4410.43     4422290  93,012,358.61
## 475 2020-01-02 4483.10 4410.43 4451.19 4461.49     6559384 116,314,994.75
## 474 2020-01-05 4444.04 4461.49 4356.14 4373.23     6900081 155,820,965.02
## 473 2020-01-06 4375.32 4373.23 4274.97 4278.48     6359870 126,953,206.07
## 472 2020-01-07 4374.45 4278.48 4264.59 4298.68     6229559 141,720,681.00
## 471 2020-01-08 4362.64 4298.68 4227.44 4296.50     6365297 135,112,493.24
##     noOfTrades
## 476       7045
## 475       7789
## 474      11095
## 473      10206
## 472       9581
## 471       9872</code></pre>
<pre class="r"><code># More sophisticated Example

bnk_df &lt;- get_banks(start_date = &quot;2021-06-01&quot;, end_date = &quot;2021-11-30&quot;) %&gt;%
  mutate(date = lubridate::ymd(date))

  ggplot(bnk_df,mapping = aes(x = date, y = close)) +
    geom_candlestick(mapping = aes(open =open,
                                   high= high,
                                   low = low,
                                   close = close)) + 
    scale_x_date(date_labels = &quot;%b-%d-%Y&quot;,date_breaks = &quot;month&quot;) + 
    theme_bw() + 
    geom_smooth() +
    labs(title = &quot;Bank Industry performance over June-Nov 2021 period&quot;,
         subtitle = &quot;Rapid recovery was corrected during the month of November&quot;)</code></pre>
<p><img src="/post/tasi-2-0_files/figure-html/industry_index-1.png" width="672" /></p>
<ul>
<li><h4 id="ุชุนุฏูู-ุณุนุฑ-ุงูุณูู-ููุชุถูู-ุงูุงุฑุจุงุญ-ุงูููุฒุนุฉ">ุชุนุฏูู ุณุนุฑ ุงูุณูู ููุชุถูู ุงูุงุฑุจุงุญ ุงูููุฒุนุฉ</h4>
ูู ุงูุนูููุงุช ุงูุดุงุฆุนุฉ ูู ุชุญููู ุงูุฃุณูู ูู ุญุณุงุจ ุนูุงุฆุฏ ุงูุณูู ุฎูุงู ูุชุฑุฉ ุฒูููุฉ ูุนููุฉ (ูุนุฏู ุงูุชุบูุฑ ูู ุณุนุฑ ุงูุณูู). ููู ุฐูู ูุง ูุนูุณ ุงูุนุงุฆุฏ ุงูููู ููุณูู ูุฃู ูุนุธู ุงูุดุฑูุงุช ุชููู ุจุชูุฒูุน ุงูุฃุฑุจุงุญ ูููุณุงูููู ููุง ูุดูู ุนุงุฆุฏ ุฅุถุงูู ูููุณุชุซูุฑ. ูุฐูู ููุช ุจุชุทููุฑ ุฏุงูุฉ ุชููู ุจุชุนุฏูู ุณุนุฑ ุงูุณูู ููุนูุณ ุงูุถุง ุงูุงุฑุจุงุญ ุงูููุฒุนุฉ. ุฅููู ูุฐุง ุงููุซุงู</li>
</ul>
<pre class="r"><code>library(&quot;tasi&quot;)
comp_symbol &lt;- 1180 #NCB Bank. 
comp &lt;- get_company_records(start_date = &quot;2020-01-01&quot;,
                    end_date = &quot;2021-11-27&quot;,
                    company_symbol = comp_symbol
                    )
comp %&gt;% 
  df_to_xts() %&gt;% # converting it to xts format 
  head()</code></pre>
<pre><code>##             Open  High   Low  Volume Close
## 2020-01-01 49.25 49.25 48.60  361128 48.65
## 2020-01-02 48.65 48.85 48.25  627781 48.80
## 2020-01-05 47.20 48.50 47.20  952211 47.40
## 2020-01-06 47.20 47.45 46.60 2101193 46.90
## 2020-01-07 47.00 47.25 46.45 1300968 46.50
## 2020-01-08 46.20 46.30 45.80 1306755 46.30</code></pre>
<pre class="r"><code>comp %&gt;% add_adj_price(comp_symbol) %&gt;% head()</code></pre>
<pre><code>##             Open  High   Low  Volume Close Adjusted
## 2020-01-01 49.25 49.25 48.60  361128 48.65 45.85164
## 2020-01-02 48.65 48.85 48.25  627781 48.80 45.99302
## 2020-01-05 47.20 48.50 47.20  952211 47.40 44.67354
## 2020-01-06 47.20 47.45 46.60 2101193 46.90 44.20230
## 2020-01-07 47.00 47.25 46.45 1300968 46.50 43.82531
## 2020-01-08 46.20 46.30 45.80 1306755 46.30 43.63682</code></pre>
<ul>
<li><h4 id="ุฌูุจ-ุจูุงูุงุช-ุงูุฃุณูู-ุนูู-ุทุฑููุฉ-quantmodgetsymbols">ุฌูุจ ุจูุงูุงุช ุงูุฃุณูู ุนูู ุทุฑููุฉ <code>quantmod::getSymbols</code></h4></li>
</ul>
<p>ูู ุญุฒู R ุงูุดููุฑุฉ ุฌุฏุง ูู ุนุงูู ุชุญููู ุณูู ุงููุงู ูู <code>quantmod</code>. ูุฐู ุงูุญุฒูุฉ ุชููุฑ ุงููุซูุฑ ูู ุงูุฃุฏูุงุช ุงูุชุญููููุฉ ุงูุฑุงุฆุนุฉ ููููุง ูุง ุชุนูู ุจุดูู ุณูุณ ูุน ุจูุงูุงุช ุงูุฃุณูุงู ุงูุบูุฑ ุงูุฑูููุฉ. ูุฐูู ููุช ุจุชุทููุฑ ุฏุงูุฉ ููุงุซูุฉ ูู <code>getSymbols()</code> ููุณูู ุงูุณุนูุฏู. ุฅููู ูุฐุง ุงููุซุงู</p>
<pre class="r"><code>library(&quot;quantmod&quot;)
library(&quot;tasi&quot;)
tasi::getSymbols(start_date = &quot;2021-01-01&quot;,
                 end_date = &quot;2021-11-27&quot;,
                 symbol_vector = c(2222,1180,1010))

#make sure to prefix the company symbol num by &quot;T&quot; 
chart_Series(T2222)</code></pre>
<p><img src="/post/tasi-2-0_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<p><br></p>
<ul>
<li><h4 id="ุฌูุจ-ุงูููุงุฆู-ุงููุงููุฉ">ุฌูุจ ุงูููุงุฆู ุงููุงููุฉ</h4>
ูุนู ูุฐู ุงูููุฒุฉ ูู ุงูุฃููู ุจูู ุงููุฒุงูุง ูู ุงูุญุฒูุฉ ุงูุฌุฏูุฏ. ููุงู ุงููุซูุฑ ูู ุงููุนุฏููุงุช ูุงูููุณูุจ ุงููุงููุฉ ุงูุชู ูุญุชุงุฌ ุงููุณุชุซูุฑ ุญุณุงุจูุง ููุญุฏุฏ ูุฏู ููุงุกุฉ ุชุดุบูู ุงูุดุฑูุฉ ุฃู ูุฏู ุฑุจุญูุชูุง ุงู ูุนุฏู ุชุบูุฑ ุณุจู ุงูุชูููู ูุฏููุง. ูู ูุฐู ุงููุนูููุงุช ูุบูุฑูุง ูููู ุงูุนุซูุฑ ุนูููุง ูู ุงูููุงุฆู ุงููุงููุฉ ููู ุฐูู ูุชุทูุจ ุงููุซูุฑ ูู ุงูุจุญุซ ุงููุฏูู. ูุฐูู ููุช ุจุชุทููุฑ ุนุฏุฉ ุฏูุงู ุชุจุณุท ูุฐู ุงูุนูููุฉ. ุฅููู ูุฐุง ุงููุซุงู</li>
</ul>
<pre class="r"><code>library(&quot;tasi&quot;)
library(&quot;kableExtra&quot;)

get_income_statement(company_symbol = 1010,
                    period_type = &quot;y&quot; # &quot;q&quot; for quarterly and &quot;y&quot; for yearly
                    ) %&gt;%
  head() %&gt;%
  kbl(table.attr = &quot;style=&#39;direction: ltr&#39;&quot;)</code></pre>
<table style="direction: ltr">
<thead>
<tr>
<th style="text-align:left;">
statement_of_income
</th>
<th style="text-align:right;">
Y_2020
</th>
<th style="text-align:right;">
Y_2019
</th>
<th style="text-align:right;">
Y_2018
</th>
<th style="text-align:right;">
Y_2017
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Special Commission Income
</td>
<td style="text-align:right;">
9813394000
</td>
<td style="text-align:right;">
10371426000
</td>
<td style="text-align:right;">
8332365000
</td>
<td style="text-align:right;">
7425107000
</td>
</tr>
<tr>
<td style="text-align:left;">
Special Commission Expenses
</td>
<td style="text-align:right;">
1599789000
</td>
<td style="text-align:right;">
2534411000
</td>
<td style="text-align:right;">
1646601000
</td>
<td style="text-align:right;">
1490030000
</td>
</tr>
<tr>
<td style="text-align:left;">
Net Special Commission Income
</td>
<td style="text-align:right;">
8213605000
</td>
<td style="text-align:right;">
7837015000
</td>
<td style="text-align:right;">
6685764000
</td>
<td style="text-align:right;">
5935077000
</td>
</tr>
<tr>
<td style="text-align:left;">
Fees from Services
</td>
<td style="text-align:right;">
1873555000
</td>
<td style="text-align:right;">
2030745000
</td>
<td style="text-align:right;">
1711052000
</td>
<td style="text-align:right;">
1510314000
</td>
</tr>
<tr>
<td style="text-align:left;">
Exchange Income
</td>
<td style="text-align:right;">
412614000
</td>
<td style="text-align:right;">
342658000
</td>
<td style="text-align:right;">
337043000
</td>
<td style="text-align:right;">
290207000
</td>
</tr>
<tr>
<td style="text-align:left;">
Trading Income
</td>
<td style="text-align:right;">
218297000
</td>
<td style="text-align:right;">
132806000
</td>
<td style="text-align:right;">
2717000
</td>
<td style="text-align:right;">
21815000
</td>
</tr>
</tbody>
</table>
<p><br></p>
<ul>
<li><h4 id="ุฌูุจ-ุงูููุงุฆู-ุงููุงููุฉ-ุงูุฃุฎุฑู-ูู-ุตูุบุฉ-xbrl">ุฌูุจ ุงูููุงุฆู ุงููุงููุฉ ุงูุฃุฎุฑู ูู ุตูุบุฉ XBRL</h4>
ููุฏ ุณุจู ูุชุญุฏุซ ุจุดูู ููุตู ุนู ุตูุบุฉ XBRL ุงูุฎุงุตุฉ ุจุงูุชูุงุฑูุฑ ุงููุงููุฉ ููููู ุงูุฃุทูุงุน ุนูู ุงูุชุฏูููุฉ <a href="https://www.arabiananalyst.com/2018/03/27/exploring-xbrl-world/">ููุง</a>. ูุฐู ุงูุตูุบุฉ ุชููููุง ูู ุฌูุจ ูุนูููุงุช ุงุถุงููุฉ ูู ุงูุชูุงุฑูุฑ ุงูุฑุจุนูุฉ ูุงูุณูููุฉ ุจุงูุฃูุถุงุญุงุช ููุนูููุงุช ูุฏููู ุงููุญุงุณุจุฉ. ุฅููู ูุฐุง ุงููุซุงู</li>
</ul>
<pre class="r"><code>library(&quot;tasi&quot;)
library(&quot;kableExtra&quot;)
# NOTE!!! This function will ask you to choose from available statements if you leave statement_type unfilled. 
get_statement_xbrl(company_symbol = 2350,
                   period = &quot;Q1-2021&quot;,
                   statement_type = &quot;StatementOfFinancialPositionCurrentNonCurrent&quot;) %&gt;%
  .[c(1:3,6:10),] %&gt;% 
  kbl(table.attr = &quot;style=&#39;direction: ltr&#39;&quot;)</code></pre>
<table style="direction: ltr">
<thead>
<tr>
<th style="text-align:left;">
[300200] Statement of financial position, current/ non-current
</th>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Start Date
</td>
<td style="text-align:left;">
2021-01-01
</td>
<td style="text-align:left;">
2020-01-01
</td>
<td style="text-align:left;">
2020-01-01
</td>
<td style="text-align:left;">
Note No.ย
</td>
</tr>
<tr>
<td style="text-align:left;">
End Date
</td>
<td style="text-align:left;">
2021-03-31
</td>
<td style="text-align:left;">
2020-03-31
</td>
<td style="text-align:left;">
2020-12-31
</td>
<td style="text-align:left;">
Note No.ย
</td>
</tr>
<tr>
<td style="text-align:left;">
Statement of financial position [abstract]
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Bank balances and cash
</td>
<td style="text-align:left;">
884,724
</td>
<td style="text-align:left;">
533,923
</td>
<td style="text-align:left;">
564,726
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Short-term deposits
</td>
<td style="text-align:left;">
952,500
</td>
<td style="text-align:left;">
1,282,500
</td>
<td style="text-align:left;">
615,000
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Trade accounts receivable
</td>
<td style="text-align:left;">
2,844,837
</td>
<td style="text-align:left;">
2,108,162
</td>
<td style="text-align:left;">
2,643,059
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Prepayments
</td>
<td style="text-align:left;">
80,083
</td>
<td style="text-align:left;">
79,143
</td>
<td style="text-align:left;">
96,028
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Inventories
</td>
<td style="text-align:left;">
1,319,617
</td>
<td style="text-align:left;">
1,219,801
</td>
<td style="text-align:left;">
1,280,975
</td>
<td style="text-align:left;">
</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>ูุฐู ุงูุตูุบุฉ ุชููููุง ูู ุงุณุชุฎุฑุงุฌ ูุนูููุงุช ูุนููุฉ ูุฅุฌุฑุงุก ุญุณุงุจุงุช ูุชุฎุตุตุฉ ูุซู ูุนุฏู ุฏูุฑุงู ุงูุฃุตูู asset turnover ratio ูููุงุณ ูุฏู ููุงุกุฉ ุงูุดุฑูุฉ ูู ุชูุธูู ููุงุฑุฏูุง. ุฅููู ูุฐุง ุงููุซุงู :</p>
<pre class="r"><code>balance_sheet &lt;- get_statement_xbrl(company_symbol = 2350,
                   period = &quot;Q1-2021&quot;,
                   statement_type = &quot;StatementOfFinancialPositionCurrentNonCurrent&quot;) 
income_statement &lt;- get_statement_xbrl(company_symbol = 2350,
                   period = &quot;Q1-2021&quot;,
                   statement_type = &quot;StatementOfIncomeNatureOfExpense&quot;) 
colnames(income_statement) &lt;- c(&quot;Term&quot;, &quot;Q1_2021&quot;, &quot;Q1_2020&quot;)
colnames(balance_sheet) &lt;- c(&quot;Term&quot;, &quot;Q1_2021&quot;, &quot;Q1_2020&quot;, &quot;FY_2020&quot;)


sales &lt;- income_statement[stringr::str_detect(string = income_statement$Term,&quot;Sales of goods&quot;),2:3]
assets &lt;- balance_sheet[stringr::str_detect(string = balance_sheet$Term,&quot;Total assets&quot;),2:3]

sales &lt;- sales %&gt;% gsub(x = .,&quot;,&quot;,&quot;&quot;) %&gt;%  as.numeric()
assets &lt;- assets  %&gt;% gsub(x = .,&quot;,&quot;,&quot;&quot;) %&gt;%  as.numeric()
names(sales) &lt;- c(&quot;Q1_2021&quot;, &quot;Q1_2020&quot;)
names(assets) &lt;- c(&quot;Q1_2021&quot;, &quot;Q1_2020&quot;)

# Asset turn over is 
print(&quot;Asset Turnover ratio Q/Q&quot;)</code></pre>
<pre><code>## [1] &quot;Asset Turnover ratio Q/Q&quot;</code></pre>
<pre class="r"><code>unlist(sales)/unlist(assets)</code></pre>
<pre><code>##    Q1_2021    Q1_2020 
## 0.07950360 0.05407454</code></pre>
</div>
