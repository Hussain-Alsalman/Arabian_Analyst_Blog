---
author: Hussain
comments: true
date: 2017-12-18 21:38:49+00:00
layout: post
link: https://arabianAnalyst.com/2017/12/18/intro-timeseries-ar-1/
slug: intro-timeseries-ar-1
title: مقدمة بسيطة للتسلسلات الزمنية
tags:
- التسلسلات الزمنية
- نظري
---



<div class="section level4">
<h4>مقدمة</h4>
<p>القدرة على قراءة و تحليل التسلسلات الزمنية مهارة مهمة لكل مدير أو صاحب قرار أو اي باحث يريد الإستفادة من الماضي و توقع المستقبل. من خواص التسلسلات الزمنية أنها تبرز السمات المهمة في مجموعة البيانات وايضا تساعد على كشف التغيرات العشوائية في البيانات. لذلك في هذا المقال سوف نتناول هذا الموضوع المهم بشكل تسلسلي (دام الدعوة كلها تسلسلات )</p>
</div>
<div id="---" class="section level4">
<h4>التحفيز لتناول هذا الموضوع</h4>
<p>هناك انتشار كبير الآن في المضاربة في العملات الرقمية مثل البتكوينز و الإثيريم وايضا الريبل. ولعل اكثر شي ملفت للنظر في سوق العملات الرقمية هو حجم التغيرات وسرعتها خلال فترات زمنية بسيطة. على إثر ذلك اتلقى كثير من التساؤلات وطلبات المشورة من اصحابي وعلى تويتر على أمل إيجاد تفسيرات لهذه الفوضى. لذلك قررت أن أبدء هذه السلسلة من الدروس.</p>
</div>
<div id="-----" class="section level4">
<h4>هل يوجد تطبيقات عملية لهذه التسلسلات؟</h4>
<p>بروتوكول كايوتو الذي يهدف إلى الحد من الغازات الدفئية طرح على الكونجرس الأمريكي سنة ١٩٩٧ ولم يتم اعتماده إلا في عام ٢٠٠٥ بعد ما قام العلماء والمختصين بطرح التحاليل لمجموعة من التسلسلات الزمنية للعوامل المؤثرة في مستويات هذه الغازات.</p>
<p>آيضا في عام ٢٠٠٦ قامت الخطوط السنغافورية بطلب عشرين طائرة بوينج من طراز ٧٨٧-٩ وتوقيع قصد طلب آخر لتسع وعشرين طائرة ايربص من طراز A350 و A380 بعد ما ادركت الشركة اهمية هذه الخطوة من خلال تحليلها للتسلسلات الزمنية للنمو المتزايد لعدد الركاب وتوافق الفرصة لتحقيق اهداف الشركة للتوسع في سوق النقل الجوي.</p>
<p>هذه بعض الآمثلة التي توضح اهمية التسلسلات الزمنية. من خلال تجربة شخصية، اجد أن القدرة على قراءة وتحليل التسلسلات الزمنية مهارة مطلوبة في سوق العمل وأنا كثيرا ما اجد نفسي اقوم بتحليل تسلسلات زمنية وخصوصا عند وضع الخطط التشغيلية في مقر عملي.</p>
</div>
<div id="--" class="section level4">
<h4>ماهي التسلسلات الزمنية</h4>
<p>في كثير من المجالات كالهندسة والتجارة وغيرها، يكون لدينا عدة متغيرات نقوم بقياسها بشكل تسلسلي خلال الزمن. فمثلا، الحكومات تقوم بقياس دخل الناتج القومي بشكل سنوي.أيضا البنوك ومؤسسات النقد تقوم بقياس نسبة الفائدة وتداول العملات بشكل يومي. عندما نقوم بقياس متغير معين خلال فترة محددة من الزمن (تسمى فترة أخذ العينات) ينتج لنا من ذلك تسلسل زمني لذلك المتغير.</p>
</div>
<div id="--" class="section level4">
<h4>مزايا التسلسلات الزمنية</h4>
<p>من المزايا للتسلسلات الزمنية النمط Trend و التغيرات الموسمية seasonal variations والتي يمكن نمذجتها بطريقة تحديدية من خلال معادلات رياضية زمنية. لكن هناك ميزة أهم وهي ميزة التسلسل ونقصد بذلك أن القيم المتقاربة في التسلسل الزمني عادة ما تكون مترابطة ايضا correlated. في الواقع، مجمل طرق التحليل للتسلسلات الزمنية تحاول تفسير هذا الترابط بل وأستخدام هذه الظاهرة للتنبؤ بالقيم المستقبلية للمتغير.</p>
</div>
<div id="-----r" class="section level4">
<h4>أمثلة لللتسلسلات الزمنية مع لغة R</h4>
<div id="--------" class="section level5">
<h5><strong>المثال الأول :عدد المسافرين في أمريكا خلال فترة الخمسينات</strong></h5>
<p>في هذا المثال سوف نتناول كيف يتعامل R مع التسلسلات الزمنية. أيضا سوف نستطلع بعض الدوال المتخصصة للتسلسلات الزمنية الموجودة الحزمة الأساسية لR</p>
<p>اما الآن فدعنا نحلق مع التسلسل الزمني لعدد المسافرين جويا في الولايات المتحدة منذ عام ١٩٤٩ إلى ١٩٦٠. هذه البيانات موجودة في بيئة R وبإمكانك الحصول عليها خلال الكود التالي. أيضا سوف آقوم بنسخها لدينا في متغير حتى نبدmgأ بتحليلها بكل راحة.</p>
<pre class="r"><code>data(&quot;AirPassengers&quot;)
AP &lt;- AirPassengers
AP</code></pre>
<pre><code>##      Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
## 1949 112 118 132 129 121 135 148 148 136 119 104 118
## 1950 115 126 141 135 125 149 170 170 158 133 114 140
## 1951 145 150 178 163 172 178 199 199 184 162 146 166
## 1952 171 180 193 181 183 218 230 242 209 191 172 194
## 1953 196 196 236 235 229 243 264 272 237 211 180 201
## 1954 204 188 235 227 234 264 302 293 259 229 203 229
## 1955 242 233 267 269 270 315 364 347 312 274 237 278
## 1956 284 277 317 313 318 374 413 405 355 306 271 306
## 1957 315 301 356 348 355 422 465 467 404 347 305 336
## 1958 340 318 362 348 363 435 491 505 404 359 310 337
## 1959 360 342 406 396 420 472 548 559 463 407 362 405
## 1960 417 391 419 461 472 535 622 606 508 461 390 432</code></pre>
<p>لغة R تحفظ التسلسلات على صيغة ts object . لهذه الصيغة مزايا جميلة ومفيدة وبالإمكان التحقق منها من خلال الكود التالي.</p>
<pre class="r"><code>class(AP)
start(AP)
end(AP)
frequency(AP)</code></pre>
<pre><code>## [1] &quot;ts&quot;
## [1] 1949    1
## [1] 1960   12
## [1] 12</code></pre>
<p>كما ترى، بإمكاننا معرفة بداية ونهاية التسلسل وكذلك الفترات الزمنية لقياس المتغير. في المخرجات، يتبين لنا أن بداية هذه التسلسل شهر يناير من عام ١٩٤٩ ونهايتها شهر ديسمبر عام ١٩٦٠ ويتم تدوين عدد الركاب بشكل شهري.</p>
<p>لعل أهم الخطوات في التحليل المبدئي للتسلسلات الزمنية هو رسمها. هذا بالضبط الي راح نسويه الآن</p>
<pre class="r"><code>    plot(AP, ylab = &quot;Passengers (1000&#39;s)&quot;)</code></pre>
<p><img src="/post/intro-timeseries-ar-1_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>هناك عدد من الملاحظات بارزة لنا في هذا الرسم البياني. أولا يبدو لنا أن عدد المسافرين في تزايد مستمر في تلك الفترة. هذا النوع من التزايد المنتظم يطلق عليه بالنمط أو Trend. أيضا يبدو لنا أن هناك نمط متكرر خلال تلك الفترة. هذا النوع من التكرار يطلق عليه بالتغيرات الموسمية أو seasonal varations. مبدئيا، بإمكاننا إفتراض أن هذه التغيرات الموسمية تعود إلى ازدياد الحجوزات في اشهر الصيف في يونيو و يوليو و أغسطس بينما الركود يكون عادة في اشهر الشتاء والخريف من شهر نوفمبر إلى فبراير. طبعا مثل هذه الفرضيات تحتاج إلى معاينة ومراجعة والتحقق منها إحصائيا.</p>
<p>يمكننا معاينة النمط بشكل ادق وذلك من خلال عزل التغيرات الموسمية من النمط. نقوم بذلك عن طريق حساب مجموع المسافرين لكل سنة. سوف نقوم بإستخدام الدالة aggregate. ستلاحظ أن المتغيرات الموسمية قد زالت وبدى لنا النمو المتزايد بشكل اوضح. آيضا بإمكاننا تحليل التغيرات الموسمية وتلخيصها في فترة واحدة. نقوم بذلك عن طريق حساب المتوسط الحسابي للأشهر وجمعها في فترة زمنية موسمية.</p>
<pre class="r"><code>layout(1:2)
plot(aggregate(AP))
boxplot(AP ~ cycle(AP))</code></pre>
<p><img src="/post/intro-timeseries-ar-1_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
</div>
<div id="-------" class="section level5">
<h5><strong>المثال الثاني: مستوى البطالة في ولاية ماين الأمريكية</strong></h5>
<p>في معظم الأحيان، نحصل على البيانات بصيغة data.frame أو Matrix وهي مختلفة عن صيغة ts. لذلك في هذا المثال سوف نتعلم كيف نحول تلك الصيغ إلى ts ليمكننا الإستفادة من الدوال العديدة التابعة لها.</p>
<p>سنبدأ بالتسلسل الزمني لمستويات البطالة في ولاية ماين الأمريكية خلال عشر سنوات ما بين ١٩٩٦ و ٢٠٠٦ والتي تم تسجيلها بشكل شهري. هذه البيانات متوفرة على موقع US Department of Labor. يمكنك ايضا الحصول عليها من خلال الريبو الخاص بهذا المقال.</p>
<p>نبدأ أولا بقراءة الملف ونسخ البيانات في متغير</p>
<pre class="r"><code>library(&quot;here&quot;)</code></pre>
<pre><code>## here() starts at /home/hussain/Documents/ArabianAnalyst/Arabian_Analyst_Blog</code></pre>
<pre class="r"><code>www &lt;- here(&quot;static&quot;, &quot;data&quot;, &quot;Maine.dat&quot;)
Maine.month &lt;- read.table(www, header = TRUE)
attach(Maine.month)
class(Maine.month)</code></pre>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<p>قمنا ايضا بإستخدام دالة attach ليمكننا التعامل مع الأعمدة الموجودة في جدول البيانات بشكل مباشر. كما ترى، الصيغة الحالية للبيانات هي data.frame. سنقوم بتحويلها إلى ts من خلال الكود التالي</p>
<pre class="r"><code>Maine.month.ts &lt;- ts(unemploy, start = c(1996, 1), freq = 12)</code></pre>
<p>في هذا الكود خصصنا وقت بدأ الفترة وهو شهر يناير سنة ١٩٩٦. ثم خصصنا عدد مرات تكرار القياس وهو بشكل شهري.</p>
<p>وكما سبق وفعلنا في المثال السابق. سوف نقوم بتلخيص البيانات على شكل المتوسط الحسابي بشكل سنوي. وهذا الكود لفعل ذلك</p>
<pre class="r"><code>Maine.annual.ts &lt;- aggregate(Maine.month.ts)/12</code></pre>
<p>لاحظ أننا قمنا بالتقسيم الأن الخطوة الأولى في التحليل هي استعراض تلك البيانات من خلال الرسم البياني.</p>
<pre class="r"><code>layout(1:2)

plot(Maine.month.ts, ylab = &quot;unemployed (%)&quot;)
plot(Maine.annual.ts, ylab = &quot;unemployed (%)&quot;)</code></pre>
<p><img src="/post/intro-timeseries-ar-1_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>في الرسم البياني تلاحظ أننا تخلصنا من التغيرات الموسمية عندما قررنا النظر على مستوى المتوسط الحسابي للبيانات بشكل سنوي مقارنة بالرسم البياني الآخر على المستوى الشهري. من الطرق التحليلية يمكننا القيام بها الآن، هي أن نقارن مستوى البطالة في احد شهور الشتاء كفبراير مثلا مع مستوى البطالة بشكل عام خلال شهور السنة. سنقوم بفعل نفس الطريقة مع شهر اغسطس لموسم الصيف.</p>
<pre class="r"><code>Maine.Feb &lt;- window(Maine.month.ts, start = c(1996,2), freq = TRUE)
Maine.Aug &lt;- window(Maine.month.ts, start = c(1996,8), freq = TRUE)
Feb.ratio &lt;- mean(Maine.Feb) / mean(Maine.month.ts)
Aug.ratio &lt;- mean(Maine.Aug) / mean(Maine.month.ts)
    Feb.ratio</code></pre>
<pre><code>## [1] 1.222529</code></pre>
<pre class="r"><code>    Aug.ratio</code></pre>
<pre><code>## [1] 0.8163732</code></pre>
<p>متوسط البطالة في ولاية ماين خلال شهر فبراير اكثر من المتوسط العام بـ ٢٢ بالمئة بينما البطالة في شهر أغسطس أقل من المتوسط بـ ١٨٪. أحد الاسباب لتلك النتائج هي أن ولاية ماين تعتبر ولاية سياحية و يكثر فيها السواح خلال الصيف مما يخلق فرص وظيفية لكثير من الناس. اما شهر فبراير فهو يأتي بعد موسم عيد الميلاد والذي تكون فيه مستويات البطالة منخفضة. وبالمقارنة يكون مستوى البطالة في شهر فبراير اكثر.</p>
</div>
<div id="------" class="section level5">
<h5><strong>المثال الثالث: عملة الدولار النيوزلندي والباوند البريطاني</strong></h5>
<p>كثير منا قد يتسرع في التنبؤ لإتجاه قيم متغيرات معينة كالأسهم المالية أو العملات الأجنبية معتمدين فقط على ما يبدو لنا أنه نمط متصاعد و إفتراضنا أن هذا النمط سوف يستمر بنفس الإتجاه. في هذا المثال سوف نقوم بتوضيح خطورة هذه العادة المتسرعة.</p>
<p>أولا سوف نقوم بقراءة ونسخ تسلسل زمني لأسعار عملة الدولار النيوزلندي بالمقارنة بالباوند البريطاني للفترة ما بين شهر يناير عام ١٩٩١ إلى مارس ٢٠٠٠.</p>
<pre class="r"><code>www &lt;- here(&quot;static&quot;, &quot;data&quot;, &quot;pounds_nz.dat&quot;)

Z &lt;- read.table(www, header = T)</code></pre>
<p>البيانات تحتوي على متوسطات ربعية لكل سنة لذلك سوف نقوم بتحويل صيغة هذه البيانات إلى ts. أيضا سنقوم بإستعراض البيانات من خلال الرسم البياني كما فعلنا في الأمثلة السابقة</p>
<pre class="r"><code>Z.ts &lt;- ts(Z, st = 1991, fr = 4)

plot(Z.ts, xlab = &quot;time / years&quot;,

ylab = &quot;Quarterly exchange rate in $NZ / pound&quot;)</code></pre>
<p><img src="/post/intro-timeseries-ar-1_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p>ستلاحظ في الرسم البياني صعود مفاجئ في رأس سنة ١٩٩٢ ثم إنحدار مستمر في قيمة العملة حتى إلى سنة ١٩٩٦ ثم صعود مفاجئ آخر حتى سنة ٢٠٠٠. للأسف لا يوجد أسباب تحديدية لهذه التقلبات، لذلك في تلك الحالة يقوم المحللين و علماء البيانات باللجوء إلى النماذج العشوائية والتي سبق وتحدث عنها في مقال سابق.</p>
<p>دعنا الآن ننظر إلى مدة خطورة التسرع في صنع القرار عند معاينة التسلسلات الزمنية. لو فصلنا الرسم البياني اعلاه إلى جزئين حول سنة ١٩٩٢ قد نتسرع ونصل إلى قرارين متناقضين.</p>
<pre class="r"><code>Z.92.96 &lt;- window(Z.ts, start = c(1992, 1), end = c(1996, 1))

Z.96.98 &lt;- window(Z.ts, start = c(1996, 1), end = c(1998, 1))

layout (1:2)

plot(Z.92.96, ylab = &quot;Exchange rate in $NZ/pound&quot;,

     xlab = &quot;Time (years)&quot; )

plot(Z.96.98, ylab = &quot;Exchange rate in $NZ/pound&quot;,

     xlab = &quot;Time (years)&quot; )</code></pre>
<p><img src="/post/intro-timeseries-ar-1_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
</div>
</div>
<div class="section level4">
<h4>الخلاصة</h4>
<p>في هذا المقال قمنا بتعريف التسلسلات الزمنية وشرح مدى اهميتها وبعض المزايا التي تخصها. أيضا ناقشنا بعض الأمثلة وتطرقنا إلى تنفيذها بإستخدام لغة R. آرجو أنكم استمتعتم بقراءة هذا المقال ولكن الأهم أنكم استفدتم وتعلمتم شيء جديد ينفعكم في حياتكم العملية. إلى مقال آخر، أستودعكم الله.</p>
</div>
